{% extends 'layout.html' %}
{# Table showing timestamp, user email, action, and JSON detail of each log entry #}
{% block content %}
  <h1 class="text-2xl font-bold mb-4">User Activity Log</h1>

  <table class="w-full table-auto border-collapse">
    <thead>
      <tr class="bg-gray-200 dark:bg-gray-700">
        <th class="px-3 py-1 text-left">When</th>
        <th class="px-3 py-1 text-left">User</th>
        <th class="px-3 py-1 text-left">Action</th>
        <th class="px-3 py-1 text-left">Details</th>
      </tr>
    </thead>
    <tbody>
      {% for e in logs %}
        <tr class="border-b border-gray-300 dark:border-gray-600">
          <td class="px-3 py-1 text-sm">{{ e.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td class="px-3 py-1 text-sm">{{ e.user.email }}</td>
          <td class="px-3 py-1 text-sm font-medium">{{ e.action }}</td>
          <td class="px-3 py-1 text-sm"><pre class="whitespace-normal">{{ e.detail|tojson(indent=2) }}</pre></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
